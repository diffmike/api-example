<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Example API</title>

    <link rel="stylesheet" href="css/style.css" />
    <script src="js/all.js"></script>


          <script>
        $(function() {
            setupLanguages(["bash","javascript"]);
        });
      </script>
      </head>

  <body class="">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
        <img src="images/logo.png" />
                    <div class="lang-selector">
                                  <a href="#" data-language-name="bash">bash</a>
                                  <a href="#" data-language-name="javascript">javascript</a>
                            </div>
                      <div id="toc">
      </div>
            </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
          <h1>Example</h1>
<!-- START_b982a9c2785c94e078bbe534a1f12d68 -->
<h2>1. Попытка авторизации пользователя</h2>
<p>Если упешно - возвращаются данные пользователя
Если не успешно - попытка найти пользователя с таким email иначе создание нового</p>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre><code class="language-bash">curl "http://example/api/login" \
-H "Accept: application/json" \
    -d "email"="sallie.jenkins@example.org" \
    -d "password"="blanditiis" \
</code></pre>
<pre><code class="language-javascript">var settings = {
    "async": true,
    "crossDomain": true,
    "url": "http://example/api/login",
    "method": "POST",
    "data": {
        "email": "sallie.jenkins@example.org",
        "password": "blanditiis"
},
        "headers": {
    "accept": "application/json"
    }
}

$.ajax(settings).done(function (response) {
console.log(response);
});</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre><code class="language-json">{
  "data": {
    "id": 96,
    "name": "Dr. Gust Jenkins",
    "email": "oreilly.vallie@example.net",
    "barcode": "ynXhWrzXnKjzVCHC",
    "created_at": "2016-09-08 09:18:24"
  },
  "meta": {
    "is_new": 0
  }
}</code></pre>
<h3>HTTP Request</h3>
<p><code>POST /api/login</code></p>
<h4>Parameters</h4>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Status</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>email</td>
<td>email</td>
<td>required</td>
</tr>
<tr>
<td>password</td>
<td>string</td>
<td>required</td>
<td>Minimum: <code>6</code></td>
</tr>
</tbody>
</table>
<!-- END_b982a9c2785c94e078bbe534a1f12d68 -->
<!-- START_0feebc29b5a3e74754172cc86934aa20 -->
<h2>2. Список магазинов</h2>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre><code class="language-bash">curl "http://example/api/shops" \
-H "Accept: application/json"</code></pre>
<pre><code class="language-javascript">var settings = {
    "async": true,
    "crossDomain": true,
    "url": "http://example/api/shops",
    "method": "GET",
        "headers": {
    "accept": "application/json"
    }
}

$.ajax(settings).done(function (response) {
console.log(response);
});</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre><code class="language-json">{
  "data": [
    {
      "id": 41,
      "title": "Laudantium animi temporibus sapiente.",
      "city": "Walkerburgh",
      "address": "33655 Wisoky Prairie Apt. 422\nDarrelview, VA 72473",
      "image": null,
      "created_at": "2016-09-08 09:18:21",
      "campaigns_count": 0,
      "max_discount": null
    },
    {
      "id": 45,
      "title": "Eius iusto debitis quaerat rerum corporis voluptatem.",
      "city": "Goodwinside",
      "address": "22961 Swift Junctions\nGreenholtberg, HI 00973",
      "image": null,
      "created_at": "2016-09-08 09:18:21",
      "campaigns_count": 0,
      "max_discount": null
    },
    {
      "id": 46,
      "title": "Natus et at quasi quo unde quidem eum est.",
      "city": "Fridabury",
      "address": "5896 Shanie Lodge\nNorth Corbin, RI 69190",
      "image": null,
      "created_at": "2016-09-08 09:18:21",
      "campaigns_count": 2,
      "max_discount": 83
    }
  ],
  "meta": {
    "pagination": {
      "total": 6,
      "count": 3,
      "per_page": 3,
      "current_page": 1,
      "total_pages": 2,
      "links": {
        "next": "http://example/api/shops?page=2"
      }
    }
  }
}</code></pre>
<h3>HTTP Request</h3>
<p><code>GET /api/shops</code></p>
<p><code>HEAD /api/shops</code></p>
<!-- END_0feebc29b5a3e74754172cc86934aa20 -->
<!-- END_0feebc29b5a3e74754172cc86934aa2 -->
<h2>3. Инфомация о магазине</h2>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre><code class="language-bash">curl "http://example/api/shops/{id}" \
-H "Accept: application/json"</code></pre>
<pre><code class="language-javascript">var settings = {
    "async": true,
    "crossDomain": true,
    "url": "http://example/api/shops/{id}",
    "method": "GET",
        "headers": {
    "accept": "application/json"
    }
}

$.ajax(settings).done(function (response) {
console.log(response);
});</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre><code class="language-json">{
  "data": {
    "id": 49,
    "title": "voluptatem ullam.",
    "city": "Satterfieldberg",
    "address": "752 Pearline",
    "image": "http://example/storage/images/cb5a1d0c5972f5831df74a428dfba8fe.jpg",
    "created_at": "2016-09-08 09:18:21",
    "campaigns_count": null,
    "max_discount": null
  }
}</code></pre>
<h3>HTTP Request</h3>
<p><code>GET /api/shops/{id}</code></p>
<p><code>HEAD /api/shops/{id}</code></p>
<!-- END_0feebc29b5a3e74754172cc86934aa2 -->
<!-- END_875b557320d9824542f32dcbe3df3f1a -->
<h2>4. Список активных акций магазина</h2>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre><code class="language-bash">curl "http://example/api/shops/{id}/campaigns" \
-H "Accept: application/json"</code></pre>
<pre><code class="language-javascript">var settings = {
    "async": true,
    "crossDomain": true,
    "url": "http://example/api/shops/{id}/campaigns",
    "method": "GET",
        "headers": {
    "accept": "application/json"
    }
}

$.ajax(settings).done(function (response) {
console.log(response);
});</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre><code class="language-json">{
  "data": [
    {
      "id": 18,
      "title": "Laboriosam voluptatem laudantium harum magni aperiam.",
      "image": "http://example/storage/images/8361465f0dc30b33e9e3b7c7987cb08b.jpg",
      "link": "http://www.hamill.com",
      "start": "1972-07-25",
      "finish": "2081-01-26"
    },
    {
      "id": 19,
      "title": "Omnis et pariatur id ea suscipit iste ducimus similique.",
      "image": "http://example/storage/images/1e3bd4c17ae6a1386c55f4dcf7ec93e7.jpg",
      "link": "https://parisian.net/sed-omnis-esse-ea-rerum-dolores.html",
      "start": "1995-02-14",
      "finish": "2017-05-21"
    }
  ]
}</code></pre>
<h3>HTTP Request</h3>
<p><code>GET /api/shops/{id}/campaigns</code></p>
<p><code>HEAD /api/shops/{id}/campaigns</code></p>
<!-- END_875b557320d9824542f32dcbe3df3f1a -->
<!-- START_cc3023bbf39eccceb4cb801eca999a73 -->
<h2>5. Детали акции со списком продуктов акции</h2>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre><code class="language-bash">curl "http://example/api/campaigns/{id}" \
-H "Accept: application/json"</code></pre>
<pre><code class="language-javascript">var settings = {
    "async": true,
    "crossDomain": true,
    "url": "http://example/api/campaigns/{id}",
    "method": "GET",
        "headers": {
    "accept": "application/json"
    }
}

$.ajax(settings).done(function (response) {
console.log(response);
});</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre><code class="language-json">{
  "data": {
    "id": 18,
    "title": "Laboriosam voluptatem laudantium harum magni aperiam.",
    "image": "http://example/storage/images/8361465f0dc30b33e9e3b7c7987cb08b.jpg",
    "link": "http://www.hamill.com",
    "start": "1972-07-25",
    "finish": "2081-01-26",
    "products": {
      "data": [
        {
          "title": "Minus mollitia omnis dicta magni reiciendis.",
          "price": 55.68,
          "price_with_discount": 342.42,
          "discount": 13,
          "discount_start": "2016-12-12",
          "discount_finish": "2016-12-13",
          "discount_type": "с 12.12.2016 по 12.13.2016, в четверг, пятницу с 00:00 по 23:59 действует скидка 10%"
        },
        {
          "title": "Ratione tempora qui porro voluptatem.",
          "price": 893.59,
          "price_with_discount": 865.81,
          "discount": 63,
          "discount_start": "2016-12-12",
          "discount_finish": "2016-12-13",
          "discount_type": "с 12.12.2016 по 12.13.2016, в четверг, пятницу с 00:00 по 23:59 действует скидка 10%"
        }
      ]
    }
  }
}</code></pre>
<h3>HTTP Request</h3>
<p><code>GET /api/campaigns/{id}</code></p>
<p><code>HEAD /api/campaigns/{id}</code></p>
<!-- END_cc3023bbf39eccceb4cb801eca999a73 -->
<!-- START_e01e5dd08fd66ad555d1c09d2025f3e -->
<h2>6. Список ID всех активных акций</h2>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre><code class="language-bash">curl "http://example/api/campaigns/active-ids" \
-H "Accept: application/json"</code></pre>
<pre><code class="language-javascript">var settings = {
    "async": true,
    "crossDomain": true,
    "url": "http://example/api/campaigns/active-ids",
    "method": "GET",
        "headers": {
    "accept": "application/json"
    }
}

$.ajax(settings).done(function (response) {
console.log(response);
});</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre><code class="language-json">{
  "data": [
    18,
    19
  ]
}</code></pre>
<h3>HTTP Request</h3>
<p><code>GET /api/campaigns/active-ids</code></p>
<p><code>HEAD /api/campaigns/active-ids</code></p>
<!-- END_e01e5dd08fd66ad555d1c09d2025f3e -->
<!-- START_c13ce4396f6a39a4e7f87041b319a955 -->
<h2>7. Получение информации о авторизованном пользователе</h2>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre><code class="language-bash">curl "http://example/api/users/details" \
-H "Accept: application/json"</code></pre>
<pre><code class="language-javascript">var settings = {
    "async": true,
    "crossDomain": true,
    "url": "http://example/api/users/details",
    "method": "GET",
        "headers": {
    "accept": "application/json"
    }
}

$.ajax(settings).done(function (response) {
console.log(response);
});</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre><code class="language-json">{
  "data": {
    "id": 96,
    "name": "Dr. Gust Jenkins",
    "email": "oreilly.vallie@example.net",
    "barcode": "ynXhWrzXnKjzVCHC",
    "created_at": "2016-09-08 09:18:24"
  },
  "meta": {
    "last_month_discount": 123,
    "last_month_spent": 1234
  }
}</code></pre>
<h3>HTTP Request</h3>
<p><code>GET /api/users/details</code></p>
<p><code>HEAD /api/users/details</code></p>
<!-- END_c13ce4396f6a39a4e7f87041b319a955 -->
<!-- START_ce01e5dd08fd66ad555d1c09d2025f3e -->
<h2>8. Список чеков пользователя с товарами</h2>
<blockquote>
<p>Example request:</p>
</blockquote>
<pre><code class="language-bash">curl "http://example/api/checks" \
-H "Accept: application/json"</code></pre>
<pre><code class="language-javascript">var settings = {
    "async": true,
    "crossDomain": true,
    "url": "http://example/api/checks",
    "method": "GET",
        "headers": {
    "accept": "application/json"
    }
}

$.ajax(settings).done(function (response) {
console.log(response);
});</code></pre>
<blockquote>
<p>Example response:</p>
</blockquote>
<pre><code class="language-json">{
  "data": [
    {
      "id": 10,
      "uid": "237741",
      "sum": 13.41,
      "sum_with_discount": 0,
      "shop_id": 49,
      "created_at": "2016-09-22 07:49:32"
    },
    {
      "id": 11,
      "uid": "485176",
      "sum": 9.1,
      "sum_with_discount": 0,
      "shop_id": 49,
      "created_at": "2016-09-22 08:18:02"
    }
  ]
}</code></pre>
<h3>HTTP Request</h3>
<p><code>GET /api/checks</code></p>
<p><code>HEAD /api/checks</code></p>
<!-- END_ce01e5dd08fd66ad555d1c09d2025f3e -->
      </div>
      <div class="dark-box">
                        <div class="lang-selector">
                                    <a href="#" data-language-name="bash">bash</a>
                                    <a href="#" data-language-name="javascript">javascript</a>
                              </div>
                </div>
    </div>
  </body>
</html>